<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" />
    <link>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Condensed&display=swap" rel="stylesheet" />
    <link>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

    <link rel="stylesheet" href=./style.css>
    </link>

    <title>Work Planner</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>

</head>

<body>
    <div class="jumbotron">
        <h1 class="display-4">Welcome to your daily planner!</h1>
        <p class="lead">Let's make your life easier with this simple daily scheduler.</p>
        <div class="d-flex" id="current-date-time">
            <!-- container for Moment.js output -->
            <div id="displayMoment"></div>
            </p>
        </div>
        <hr class="my-4">
    </div>

    <div class="current-date">
        <p></p>
    </div>

    <div class="container pb-5 mb-3">
        <div class="table-responsive">
            <table class="table">
                <thead></thead>
                <tr>
                    <div class="row">
                        <th class="main-time">Time</th>
                        <div class="row">
                            <th class="main-task">Task</th>
                            <div class="row">
                                <th class="main-save">Save</th>
                            </div>
                        </div>
                    </div>
                </tr>
                </thead>
                <tbody>
                    <tr id="9am">
                        <th class="time-col">9:00am</th>
                        <td class="input-text">
                            <textarea class="input-area" id="text-time"></textarea>
                        </td>
                        <td id="save-9am" class="align-middle save-button-cell">
                            <div class="text-center">
                                <button class="btn btn-outline-secondary save-button" type="button">
                                    <i class="fas fa-save"></i>
                                </button>
                            </div>
                    </tr>
                    <tr id="10am">
                        <th class="time-col">10:00am</th>
                        <td class="input-text">
                            <textarea class="input-area" id="text-time"></textarea>
                        </td>
                        <td id="save-10am" class="align-middle save-button-cell">
                            <div class="text-center">
                                <button class="btn btn-outline-secondary save-button" type="button">
                                    <i class="fas fa-save"></i>
                                </button>
                            </div>
                    </tr>
                    <tr id="11am">
                        <th class="time-col">11:00am</th>
                        <td class="input-text">
                            <textarea class="input-area" id="text-time"></textarea>
                        </td>
                        <td id="save-11am" class="align-middle save-button-cell">
                            <div class="text-center">
                                <button class="btn btn-outline-secondary save-button" type="button">
                                    <i class="fas fa-save"></i>
                                </button>
                            </div>
                    </tr>
                    <tr id="12pm">
                        <th class="time-col">12:00pm</th>
                        <td class="input-text">
                            <textarea class="input-area" id="text-time"></textarea>
                        </td>
                        <td id="save-12pm" class="align-middle save-button-cell">
                            <div class="text-center">
                                <button class="btn btn-outline-secondary save-button" type="button">
                                    <i class="fas fa-save"></i>
                                </button>
                            </div>
                    </tr>
                    <tr id="1pm">
                        <th class="time-col">1:00pm</th>
                        <td class="input-text">
                            <textarea class="input-area" id="text-time"></textarea>
                        </td>
                        <td id="save-1pm" class="align-middle save-button-cell">
                            <div class="text-center">
                                <button class="btn btn-outline-secondary save-button" type="button">
                                    <i class="fas fa-save"></i>
                                </button>
                            </div>
                    </tr>
                    <tr id="2pm">
                        <th class="time-col">2:00pm</th>
                        <td class="input-text">
                            <textarea class="input-area" id="text-time"></textarea>
                        </td>
                        <td id="save-2pm" class="align-middle save-button-cell">
                            <div class="text-center">
                                <button class="btn btn-outline-secondary save-button" type="button">
                                    <i class="fas fa-save"></i>
                                </button>
                            </div>
                    </tr>
                    <tr id="3pm">
                        <th class="time-col">3:00pm</th>
                        <td class="input-text">
                            <textarea class="input-area" id="text-time"></textarea>
                        </td>
                        <td id="save-3pm" class="align-middle save-button-cell">
                            <div class="text-center">
                                <button class="btn btn-outline-secondary save-button" type="button">
                                    <i class="fas fa-save"></i>
                                </button>
                            </div>
                    </tr>
                    <tr id="4pm">
                        <th class="time-col">4:00pm</th>
                        <td class="input-text">
                            <textarea class="input-area" id="text-time"></textarea>
                        </td>
                        <td id="save-4pm" class="align-middle save-button-cell">
                            <div class="text-center">
                                <button class="btn btn-outline-secondary save-button" type="button">
                                    <i class="fas fa-save"></i>
                                </button>
                            </div>
                    </tr>
                    <tr id="5pm">
                        <th class="time-col">5:00pm</th>
                        <td class="input-text">
                            <textarea class="input-area" id="text-time"></textarea>
                        </td>
                        <td id="save-5pm" class="align-middle save-button-cell">
                            <div class="text-center">
                                <button class="btn btn-outline-secondary save-button" type="button">
                                    <i class="fas fa-save"></i>
                                </button>
                            </div>
                    </tr>
                </tbody>
        </div>
    </div>
    </table>

    <footer class="footer text-center py-3 bg-dark sticky-footer">
        <div class="container" id="footer-container">

            <span class="text-muted">Copyright &copy; 2020 <a class="text-info">Barbara Potiriadis</a></span>
        </div>
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript">


        $(document).ready(function () {


            var storedEvent;
            var savedEvent;
            var event;
            var eventsArray = [];
            var eventsObject = {};
            var dateEl;
            var dateObj;
            var storedDate;
            var dateArray;
            var timeArray;

            var hour;

            function init() {
                setInterval();
                storeCurrentDate();
                storeNewDate();
                changeColour();
                saveTask();
                storeDate();
                clearEvents();
            }
            // Display current date with time
            setInterval(function () {
                var dateEl = moment().format("dddd, MMMM Do YYYY | h:mm:ss a");

                var dateDiv = document.querySelector("#displayMoment");
                dateDiv.textContent = dateEl;

            }, 1000);


            function storeCurrentDate() {
                storedDate = JSON.parse(localStorage.getItem(date));

                if (storedDate === null) {
                    dateEl = storedDate;
                    dateObj['date'] = dateEl;

                    dateArray.push(dateObj);
                    localStorage.setItem(dateEl, JSON.stringify(dateArray));
                }

            }

            function storeNewDate() {
                var existingDate = JSON.parse(localStorage.getItem(dateEl));

                if (existingDate !== null) {
                    timeArray = existingDate;
                }
            }

            function changeColour() {
                var currentHour = parseInt(moment().format('h'));
                var timeEl = $("#tr[id")
                    .map(function () {
                        return this.id;
                    })
                    .get()

                for (var i = 0; i < timeEl.length; i++) {
                    var timeElInt = parseInt(timeEl[i]);
                }

                if (timeElInt === currentHour) {
                    $('#' + timeElInt[i]).find('input-area').css('background-color', '#3cb371');
                } else if (timeElInt < eventsObject) {
                    $(".input-area").css('background-color', '#ffdab9');
                } else if (timeElInt > eventsObject) {
                    $(".input-area").css('background-color', 'lightgray');
                }

            }

            function saveTask() {
                $(".save-button").on("click", function(event) {
                    event.preventDefault(event);
                    savedEvent = event.target;

                    


                });

                function storeDate() {
                    localStorage.setItem("event", JSON.stringify(eventsArray));
                    console.log(savedEvent);
                }

                function clearEvents() {
                    $(".input-area").val("");
                    localStorage.clear();
                }

            }


        });

    // <script src="./script.js"></script>


</body>

</html>